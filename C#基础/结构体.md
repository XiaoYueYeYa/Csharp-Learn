## 结构体



#### 总结:

==概念:==结构体 `struct` 是**变量和函数的集合** 用来表示特定数据的集合

**访问修饰符**:`public`和`private` 用来修饰变量和方法的 `public`**外部**可以调用 `private`**仅内部**使用 不写则**默认**是`private`
**结构函数**:**没有返回值** 函数名和结构名相同 **可以进行函数重载** 主要是帮助我们快速进行初始化结构体对象的

==注意:==
1.在结构体中声明的变量 **不能初始化** 只能在外部或者在函数中赋值(初始化)
2..在结构体中声明的函数 **不用**加`static`的

**结构体是值类型**



#### 基本概念

结构体 是一种**自定义变量类型** **类似枚举**需要自己定义
它是数据和函数的集合
在结构体中 可以声明各种变量和方法

==作用:==用来表现存在关系的**数据集合** 比如用结构体表现学生 动物 人类等等

#### 基本语法

1.结构体一般写在 `namespace`语句块中
2.结构体关键词 `struct`

```c#
struct 自定义结构体名字
{
    //第一部分
    //变量

    //第二部分
    //构造函数(可选)

    //第三部分
    //函数
}
```

==注意==: 构造体的**名字 规范** 是**帕斯卡命名法(首字母大写)** 

#### 访问修饰符

修饰结构体中变量和方法 <u>是否能够被外部使用</u>
`public` 公有的 **可以被外部访问**
`private` 私有的 只能在内容使用
**默认**不写 为`private`

#### 实例

创建一个关于学生的结构体

```c#
//创建一个关于学生的结构体
struct Student
{
    //变量
    //结构体声明的变量 不能够初始化
    //变量类型 可以写任意类型 包括结构体 但是不能是自己的结构体(可以是其他的)
    //Student s; //不能是自己的结构体
    //姓名
    public string name;
    //学号
    public int number;
    //年龄
    public int age;
    //性别
    public bool sex;
    
    //结构函数
    #region 知识点六 结构体的构造函数
    //基本概念
    //1.没有返回值
    //2.函数名必须和结构体名相同
    //3.必须有参数
    //4.如果声明了构造函数 那么必须在其中对所有变量数据初始化

    //构造函数 一般是用于在外部方便初始化的
    public Student(string name, int number, int age, bool sex)
    {
        //新关键字 this
        //this 代表自己
        this.name = name;
        this.number = number;
        this.age = age;
        this.sex = sex;
    }
    //构造函数也可以进行函数重载 但也必须进行初始化
    public Student(string name)
    {
        this.name=name;
        this.number = 0;
        this.age = 0;
        this.sex = false;
    }
    #endregion

    //函数方法
    //表现这个数据结构的行为

    //注意 在结构体中的方法 目前不需要加static关键字
    public void Speak()
    {
        //函数中可以直接使用结构体内部声明的变量
        Console.WriteLine("我的名字是{0},今年{1}岁", name, age);
    }
    //可以根据需求 写无数个函数
}
```

#### 构造函数

基本概念
1.**没有返回值**
2**.函数名必须和结构体名相同**
3.**必须有参数**
4.如果声明了构造函数 那么**必须将其中**对所有**变量数据初始化**

==构造函数== 一般是用于在**外部方便初始化**的

```c#
public Student(string name, int number, int age, bool sex)
{
    //新关键字 this
    //this 代表自己
    this.name = name;
    this.number = number;
    this.age = age;
    this.sex = sex;
}
```

构造函数**也可以**进行**函数重载** 但也**必须**进行**初始化**

```c#
public Student(string name)
{
    this.name=name;
    this.number = 0;
    this.age = 0;
    this.sex = false;
}
```

#### 结构体的使用

变量类型 变量名;

```c#
Student s1;
s1.name = "Xiao";
s1.age = 1;
s1.sex = true;
s1.number = 246622201;
s1.Speak();

Student s2 = new Student("yue",246622,18,false);
s2.Speak();
```



#### 练习题

##### 第一题:

使用结构体描述学员的信息 姓名 性别 年龄 班级 专业
创建两个学员对象 并对其基本信息进行初始化并打印

```c#
struct Student
{
    public string name;
    public string sex;
    public int age;
    public string room;
    public string discipline;

public Student(string name, string sex, int age,string room,string discipline)
{
    this.name = name;
    this.sex = sex;
    this.age = age;
    this.room = room;
    this.discipline = discipline;

    Console.WriteLine("姓名:{0} 性别:{1} 年龄:{2} 教室:{3} 专业:{4}",name,sex,age,room,discipline);
}

}
```

```c#
Student s1 = new Student("Xiao","男",19,"142","软件设计");
```

##### 第二题:

使用结构体描述矩形的信息 长宽高 创建一个矩形 对其长宽进行初始化
并打印矩形的长 宽 面积 周长等信息

```c#
struct Rectangle
{
    public int w;
    public int h;
    public Rectangle(int w,int h)
    {
        this.w = w;
        this.h = h;
        int area = w*h;
        int perimeter = 2*(w+h);
        Console.WriteLine("这个矩形 长:{0} 宽:{1} 面积:{2} 周长:{3}",w,h,area,perimeter);
    }
}
```

```c#
 Rectangle r = new Rectangle(3,3);
```

##### 第三题:

使用结构体描述玩家信息 玩家名称 玩家职业
请用户输入玩家姓名 选择玩家职业 最后打印玩家的攻击信息
职业:
战士(技能:冲锋)
猎人(技能:假死)
法师(技能:奥术冲击)
打印结果: 猎人XXX释放了假死

```c#
enum Profession//职业
{
    Warrior,
    Hunter,
    Mage,
}
struct Players
{
    public string name;
    public Profession profession;
    public Players(string name, Profession profession)
    {
        this.name = name;
        this.profession = profession;

        string pfs = "";
        string skill = "";

        switch (profession)
        {
            case Profession.Warrior:
                pfs = "战士";
                skill = "冲锋";
                break;
            case Profession.Hunter:
                pfs = "猎人";
                skill = "假死";
                break;
            case Profession.Mage:
                pfs = "法师";
                skill = "奥术冲击";
                break;
        }
        Console.WriteLine("{0}{1}释放了{2}",pfs,name,skill);
    }
}
```

```c#
Console.WriteLine("输入名字");
string name = Console.ReadLine();
Console.WriteLine("输入职业 0:战士 1:猎人 2:法师");
try
{
    int a = int.Parse(Console.ReadLine());
    Players py = new Players(name, (Profession)a);
    Console.WriteLine();
}
catch (Exception)
{
    Console.WriteLine("请输入数字");
}
```

##### 第四题:

使用结构体描述小怪物

```c#
struct Monster
{
    public string name;
    public int atk;
    public Monster(string name)
    {
        this.name = name;	
        Random r = new Random();//随机数值
        atk = r.Next(10,30);
    }
    public void Atk()
    {
        Console.WriteLine("{0}的攻击力是{1}",name,atk);
    }
}
```

定义一个数组存储10个上面描述的小怪物 每个小怪物的名字为(小怪物+数组下标)
列举:小怪物0 最后打印10个小怪物的名字 + 攻击力数值
变量类型[] 数组名 = new 变量类型[长度]

```c#
Monster[] monitors = new Monster[10];
for (int i = 0; i < monitors.Length; i++)
{
    monitors[i] = new Monster("小怪物" + i);
    monitors[i].Atk();
}
```

##### 第五题:

引用已学过的知识 实现超人打小怪物
提示:
结构体描述超人和小怪物
定义一个方法实现超人攻击小怪物
定义一个方法实现小怪物攻击超人

结构体是值类型 想要在函数内部改变值类型信息 外部受影响 要用 ref 或者 out

```c#
struct Man
{
    public string name;
    public int atk;
    public int def;
    public int hp;
    public Man(string name,int atk,int def,int hp)
    {
        this.name = name;
        this.atk = atk;
        this.def = def;
        this.hp = hp;
    }

    //超人打小怪物的逻辑
    public void Atk(ref Boss boos)
    {
        boos.hp -= atk - boos.def;
        Console.WriteLine("{0}攻击了{1} 造成了{2}点伤害 {3}的剩余血量为{4}点", name, boos.name, atk - boos.def, boos.name, boos.hp);
    }
}
struct Boss
{
    public string name;
    public int atk;
    public int def;
    public int hp;
    public Boss(string name, int atk, int def, int hp)
    {
        this.name = name;
        this.atk = atk;
        this.def = def;
        this.hp = hp;
    }
    //小怪物打超人的逻辑
    public void Atk(ref Man man)
    {
        man.hp -= atk - man.def;
        Console.WriteLine("{0}攻击了{1} 造成了{2}点伤害 {3}的剩余血量为{4}点",name,man.name, atk - man.def,man.hp,man.hp);
    }
}
```

```c#
Man man = new Man("Yue",20,10,520);
Boss boss = new Boss("jie", 15, 10, 250);
while (true)
{
    man.Atk(ref boss);
    if (boss.hp <= 0 )
    {
        Console.WriteLine("{0}胜利", man.name);
        break;
    }
    boss.Atk(ref man);
    if (man.hp <= 0)
    {
        Console.WriteLine("{0}胜利", boss.name);
        break;
    }
    Console.WriteLine("点任意键继续");
    Console.ReadKey(true);
}
```



---
