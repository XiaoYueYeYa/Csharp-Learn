[数据变量类型](../Csharp入门/数据变量类型.md)
## 如何判断 值类型和引用类型
F12 转到定义 进到内部去查看
是`class`就是引用
是`struct`就是值
```C#
int i = 0;
string str = "123";
```

## 语句块
命名空间
   ↓
类 接口 结构体
   ↓
函数 属性 索引器 运算符重载等(类 接口 结构体)
   ↓
条件分支 循环

上层语句块:类 结构体
中层语句块:函数
底层语句块:条件分支 循环等

我们的逻辑代码写在哪里?
答:函数 条件分支 循环 中低层语句块中

我们的变量可以声明在哪里?
答:上 中 底部都能声明变量
上层语句块中:成员变量
中 底层语句块中:临时变量

## 变量的生命周期
编程时大部分都是 临时变量
在中底层声明的临时变量(函数 条件分支 循环语句块等)
语句块执行结束
没有被记录的对象将被回收或变成垃圾
值类型:**被系统自动回收**
引用类型:栈上用于存地址的**房间被系统自动回收** 堆内存具体**内容变成垃圾 待下次GC回收**

```C#
int i2 = 1;
string str2 = "123";
{
    int b = 1;
}
//Console.WriteLine(b);报错
//while (true)
//{
//    int index = 1;
//}
```


想不被回收或者不变垃圾
必须将其记录下来 
如何记录?
在更高层级记录或者
使用静态全局变量记录
```C#
class Test
{
    public static int TestI = 0;
    public int i=1;
    public string str="123";
}
static int c = 0;

```

```C#
c = 0;
if (true)
{
    c = 1;
}

int c2 = 10;
Test.TestI = c2;
```
## 结构体中的值和引用
结构体本身是值类型
前提:该结构体没有作为其他类的成员
在结构体中的值 栈中存储值具体内容
在结构体中的引用 对重存储引用具体的内存

引用类型始终存储在堆中
真正通过结构体使用其中引用类型时只是顺藤摸瓜
```C#

struct TestStrict
{
    public Test t;
    public int i;
}
```

```C#
TestStrict ts = new TestStrict();
```

## 类中的值和引用

类本身是引用类型
在类中的值 堆中存储具体的值
在类中的引用 堆中存储引用具有的值(堆中存储引用的房间地址)

值类型跟着大哥走 引用类型一根筋
```C#
Test t = new Test();
```

## 数组中的存储规则
数组本身是引用类型
值类型数组 堆中房间存具体内容
引用类型数组 堆中房间存地址
```C#
int[] arrayInt = new int[5];
object[] arrays = new object[5];
```

## 结构体继承接口
利用里氏替换原则 用接口容器装载结构体存在装箱拆箱
```C#
TestStruct obj1 = new TestStruct();
obj1.Value = 1;
Console.WriteLine(obj1.Value);
TestStruct obj2 = obj1;
obj2.Value = 2;
Console.WriteLine(obj1.Value);
Console.WriteLine(obj2.Value);

ITest IObj1 = obj1;//装箱
ITest IObj2 = IObj1;
IObj1.Value = 99;
Console.WriteLine(IObj1.Value);
Console.WriteLine(IObj2.Value);

TestStruct obj3 = (TestStruct)IObj1;//拆箱
```
