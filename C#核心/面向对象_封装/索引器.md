### 索引器

#### 总结

索引器对于我们来说主要==作用==
可以让我们**以中括号的形式访问自定义类中的元素** 规则自己定 访问时**和数组一样**
比较适用于 在**类中有数组变量时**使用 可以**方便的访问**和**进行逻辑处理**

==固定写法==
访问修饰符 返回值 this[参数列表]
`get`和`set`语句块
可以重载
         
==注意==:**结构体**里面也一样是**支持索引器**

#### 基本概念

让对象可以**像数组一样**通过**索引访问其中元素** 使程序看起来更直观 更容易编写

#### 索引器基本语法

```c#
访问修饰符 返回值 this[参数类型 参数名,参数类型 参数名...]
{
      内部的写法和规则和索引器相同
      get{}
      set{}
}
```

```c#
class Person
{
    private string name;
    private int age;
    private Person[] friends;
    private int[,] array;
    
    #region 知识点五 索引器可以重载
    //重载的概念是 函数名相同 参数类型 数量 顺序不同
    //        就当this是函数名
    public int this[int i,int j]
    {
        get
        {
            return array[i,j];
        }
        set
        {
            array[i,j] = value;
        }
    }

    public string this[string str]
    {
        get
        {
            //通过索引来得到想要的值
            switch (str)
            {
                case "name":
                    return this.name;
                case "age":
                    return this.age.ToString();
            }
            return "";
        }
    }

    #endregion

    public Person this[int index]
    {

        get
        {
            //可以写逻辑的 根据需求来处理这里面的内容
            #region 知识点四 索引器中可以写逻辑
            //如果friends里面没有内容
            //并且朋友总数量(friends.Length-1)小于传进了的索引index
            //就直接返回空
            if (friends == null || friends.Length - 1 < index)
            {
                return null;
            }
            #endregion
            return friends[index];
        }
        set
        {
            //value代表传入的值
            //可以写逻辑的 根据需求来处理这里面的内容
            if (friends == null)
            {   
                //如果为空那就将传进来的那个人变成我的新朋友
                friends = new Person[] { value };
            }
            else if(index > friends.Length - 1)
            {
                //自己定了一个规则 如果索引器越界(传进来的index索引比friends[]数组的长度大)
                //就默认把friends[friends.Length - 1]最后一个朋友给替换成传进来的新朋友
                friends[friends.Length - 1] = value;
            }
            friends[index] = value;
        }
    }
}
```

#### 索引器的使用

```c#
Person p = new Person();
p[0] = new Person();
//p[0]得到的就是private Person[] friends里面的第一个朋友
Console.WriteLine("1111111"+p[0]);
```



---
